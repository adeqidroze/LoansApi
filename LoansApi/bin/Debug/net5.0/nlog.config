<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      autoReload="true"
      internalLogLevel="Trace"
      internalLogFile=".\Nlog\internalLog.txt">            
           

    <extensions>
      <add assembly="NLog.Web.AspNetCore"/>
    </extensions>
 
    <targets>
      <target name ="database"
              xsi:type ="Database"
              connectionString ="Server=DESKTOP-R3U8RO1\\SQLEXPRESS;Database=LoansAPI;Trusted_connection=True;"
              dbProvider ="Microsoft.Data.SqlClient.SqlConnection,Microsoft.Data.SqlClient"
              commandText ="Insert into Logs(CreatedOn,Message,Level,CurrentException,StackTrace,ExceptionLogger,Url) 
              values(@datetime,@msg,@level,@exception,@trace,@logger,@url)">
        
        <parameter name="@datetime" layout ="${longdate}" dbType ="DateTime"/>
        <parameter name="@msg" layout ="${message}" />
        <parameter name="@level" layout ="${level}" />
        <parameter name="@exception" layout ="${exception}" />
        <parameter name="@trace" layout ="${stacktrace}" />
        <parameter name="@logger" layout ="${logger}" />
        <parameter name="@url" layout ="${aspnet-request-url}" />
      </target>              
    </targets>
    <rules>
        <logger name="*" minlevel="Trace" writeTo="database" />
    </rules>
</nlog>